<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SULAP RADIO | OFFICIAL LIVE STATION</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Metal+Mania&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --sonik-yellow: #f8ff00; }
        body { background-color: #000; color: white; font-family: 'Roboto', sans-serif; overflow-x: hidden; }
        
        /* SPLASH SCREEN */
        #splash-screen {
            position: fixed; inset: 0; z-index: 9999;
            background: radial-gradient(circle, #111 0%, #000 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        .splash-logo { height: 120px; margin-bottom: 2rem; filter: drop-shadow(0 0 20px rgba(248, 255, 0, 0.4)); }
        .tune-in-btn {
            font-family: 'Metal Mania', cursive; background: var(--sonik-yellow); color: black;
            padding: 1rem 3rem; font-size: 1.5rem; letter-spacing: 3px; cursor: pointer; transition: 0.3s;
        }

        /* BRANDING */
        .lodeh-font { 
            font-family: 'Metal Mania', cursive; letter-spacing: 2px; text-transform: uppercase;
            color: #fff; text-shadow: 3px 3px 0px var(--sonik-yellow);
            filter: drop-shadow(0 0 20px rgba(248, 255, 0, 0.4));
            white-space: nowrap;
        }

        /* HERO SLIDER */
        #hero-slider { position: absolute; inset: 0; z-index: 0; }
        .slide { position: absolute; inset: 0; background-size: cover; background-position: center; display: none; }
        .hero-overlay { position: absolute; inset: 0; background: linear-gradient(to top, #000 0%, rgba(0,0,0,0.4) 100%); z-index: 1; }
        
        .station-logo { height: 80px; width: auto; filter: drop-shadow(0 0 10px rgba(248,255,0,0.3)); }
        
        /* INTERACTION PANEL */
        #interaction-panel { display: none; background: #0a0a0a; border-bottom: 4px solid var(--sonik-yellow); height: 100vh; overflow-y: auto; position: fixed; top: 0; width: 100%; z-index: 200; }
        
        .social-bar { position: fixed; left: 0; top: 50%; transform: translateY(-50%); z-index: 100; display: flex; flex-direction: column; }
        .social-icon { background: #111; color: white; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; transition: 0.3s; border-bottom: 1px solid #222; }
        .social-icon:hover { background: var(--sonik-yellow); color: black; width: 60px; }

        .live-tag { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
    </style>
</head>
<body>

    <div id="splash-screen">
        <img src="img/logo.png" alt="SULAP RADIO" class="splash-logo">
        <button class="tune-in-btn" onclick="startStation()">TUNE IN</button>
    </div>

    <div class="social-bar">
        <a href="https://fb.com/sulap.compound" target="_blank" class="social-icon"><i class="fab fa-facebook-f"></i></a>
        <a href="https://instagram.com/sulap.compound" target="_blank" class="social-icon"><i class="fab fa-instagram"></i></a>
        <a href="https://tiktok.com/@sulap.compound" target="_blank" class="social-icon"><i class="fab fa-tiktok"></i></a>
    </div>

    <div id="interaction-panel" class="pt-20 pb-24 px-6 md:px-20">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-4">
                <h2 class="text-2xl md:text-4xl font-black italic text-white italic uppercase">INTERACT <span class="text-yellow-400">LIVE</span></h2>
                <button id="close-panel" class="text-yellow-400 border border-yellow-400 px-4 py-1 uppercase font-bold text-xs hover:bg-yellow-400 hover:text-black transition">Close [X]</button>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                <div>
                    <h3 class="text-yellow-400 text-sm mb-4 tracking-widest italic font-bold uppercase">Recently Played</h3>
                    <div id="recent-list" class="space-y-2"></div>
                </div>
                <div class="flex flex-col h-[550px]">
                    <h3 class="text-yellow-400 text-sm mb-4 tracking-widest italic font-bold uppercase">Station Playlist</h3>
                    <input type="text" id="list-filter" placeholder="SEARCH SONGS..." class="bg-[#111] border border-white/10 p-3 mb-4 text-[10px] font-bold text-yellow-400 outline-none">
                    <div id="song-library" class="overflow-y-auto space-y-2 flex-grow pr-2"></div>
                </div>
                <div>
                    <h3 class="text-yellow-400 text-sm mb-4 tracking-widest italic font-bold uppercase">Listener Chat</h3>
                    <iframe src="https://www3.cbox.ws/box/?boxid=3551593&boxtag=Agz31u" width="100%" height="450" frameborder="0"></iframe>
                </div>
            </div>
        </div>
    </div>

    <section class="relative h-screen flex items-center px-6 md:px-24">
        <div id="hero-slider"></div>
        <div class="hero-overlay"></div>

        <nav class="absolute top-0 left-0 w-full z-50 px-6 md:px-12 py-8 flex justify-between items-center">
            <img src="img/logo.png" alt="SULAP RADIO" class="station-logo">
            <button id="open-panel" class="bg-yellow-400 text-black px-6 py-2 text-[10px] font-black uppercase hover:bg-white transition">INTERACT LIVE</button>
        </nav>

        <div class="relative z-20 w-full max-w-5xl">
            <div class="flex items-center space-x-3 mb-4">
                <span class="live-tag bg-red-600 text-white text-[9px] px-2 py-1 font-bold">ON AIR</span>
                <h2 id="current-playlist-tag" class="text-yellow-400 font-bold text-sm md:text-2xl uppercase tracking-widest italic">LOADING PLAYLIST...</h2>
            </div>
            <h1 class="lodeh-font text-5xl md:text-7xl lg:text-8xl mb-8">SULAP RADIO</h1>
            <div class="border-l-4 border-yellow-400 pl-6">
                <p id="current-track" class="text-xl md:text-3xl font-bold uppercase tracking-tighter leading-none mb-2 text-white italic">Connecting Stream...</p>
                <p class="text-gray-400 text-xs uppercase font-bold tracking-widest italic">Digital FM Stream Worldwide</p>
            </div>
        </div>
    </section>

    <section class="bg-[#050505] py-24 px-6 md:px-24">
        <div class="max-w-4xl border-t border-white/10 pt-12">
            <h2 class="text-yellow-400 text-xs font-black tracking-[0.3em] mb-8 uppercase">About the Compound</h2>
            <div class="text-gray-300 text-lg md:text-2xl leading-relaxed space-y-8">
                <p>Welcome to <span class="text-white font-bold">SULAP RADIO</span>. This is the official home of the Sulap Compound, broadcasting the best in Rock, underground hits, and local talent across the digital airwaves.</p>
                <p>Our mission is simple: To provide a high-energy platform for listeners who crave something different, broadcasting straight from the heart of <span class="text-white italic">Bislig City</span>.</p>
            </div>
        </div>
    </section>

    <footer class="fixed bottom-0 w-full z-[150] bg-black border-t-2 border-yellow-400 p-4 md:px-12">
        <audio id="mainAudio" src="https://a11.asurahosting.com:8400/radio.mp3"></audio>
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-4 w-1/3">
                <div id="now-playing-art" class="hidden md:block w-12 h-12 bg-gray-900 border border-white/10 bg-cover bg-center"></div>
                <div class="truncate"><h4 id="footer-track" class="font-black text-[11px] uppercase truncate">Sulap Radio</h4></div>
            </div>
            <button onclick="togglePlay()" class="text-5xl text-yellow-400 hover:scale-110 transition"><i id="playIcon" class="fas fa-play-circle"></i></button>
            <div class="w-1/3 flex justify-end"><input type="range" min="0" max="1" step="0.1" value="1" oninput="setVolume(this.value)" class="accent-yellow-400 w-32"></div>
        </div>
    </footer>

    <script>
        const API_BASE = "https://a11.asurahosting.com/api";
        const STATION_ID = "507";
        const _k = "f45b139134ce81b1:cd9d1bdd34bd6d0811962c7ccacad167";
        const audio = document.getElementById('mainAudio');
        let fullLibrary = [];

        function startStation() {
            audio.play();
            $('#playIcon').attr('class', 'fas fa-pause-circle');
            $('#splash-screen').css({'opacity': '0', 'visibility': 'hidden'});
        }

        function updateLiveInfo() {
            $.getJSON(`${API_BASE}/nowplaying/${STATION_ID}`, function(data) {
                const track = data.now_playing.song.text;
                const art = data.now_playing.song.art;
                const playlistName = data.now_playing.playlist || "SULAP LIVE";
                
                $('#current-track, #footer-track').text(track);
                $('#current-playlist-tag').text(playlistName);
                $('#now-playing-art').css('background-image', `url(${art})`);
                
                let histHtml = "";
                data.song_history.slice(0, 5).forEach(item => {
                    histHtml += `<div class="bg-white/5 p-2 border-l-2 border-yellow-400 mb-2 text-[10px] uppercase font-bold flex items-center"><img src="${item.song.art}" class="w-7 h-7 mr-3"><div>${item.song.text}</div></div>`;
                });
                $('#recent-list').html(histHtml);
            });
        }

        function loadSongLibrary() {
            $.getJSON(`${API_BASE}/station/${STATION_ID}/requests`, function(data) {
                fullLibrary = data;
                renderSongs(fullLibrary);
            });
        }

        function renderSongs(songs) {
            let html = "";
            songs.forEach(item => {
                html += `<div class="bg-white/5 p-2 flex items-center justify-between mb-1 border-b border-white/5"><div class="flex items-center space-x-3"><img src="${item.song.art}" class="w-8 h-8 rounded-sm"><div><div class="text-[10px] font-black uppercase text-white">${item.song.title}</div><div class="text-[8px] text-gray-500 uppercase">${item.song.artist}</div></div></div><button onclick="sendRequest('${item.request_id}')" class="bg-yellow-400 text-black px-3 py-1 text-[8px] font-black uppercase">REQ</button></div>`;
            });
            $('#song-library').html(html);
        }

        function sendRequest(requestId) {
            $.ajax({
                url: `${API_BASE}/station/${STATION_ID}/request/${requestId}`,
                type: 'POST',
                headers: { 'X-API-Key': _k },
                success: function() { alert("Request Sent!"); },
                error: function() { alert("Request limit reached."); }
            });
        }

        $(document).ready(function(){
            // 20 SLIDE GENERATOR LOOKING IN /img/ FOLDER
            let slidesHtml = "";
            for(let i=1; i<=20; i++) {
                let show = (i===1) ? 'style="display:block;"' : '';
                slidesHtml += `<div class="slide" ${show} style="background-image: url('img/slide${i}.jpg');"></div>`;
            }
            $('#hero-slider').html(slidesHtml);

            updateLiveInfo(); loadSongLibrary();
            setInterval(updateLiveInfo, 10000);
            
            $('#open-panel').click(() => $('#interaction-panel').slideDown(400));
            $('#close-panel').click(() => $('#interaction-panel').slideUp(400));

            $('#list-filter').on('keyup', function() {
                let val = $(this).val().toLowerCase();
                let filtered = fullLibrary.filter(s => s.song.text.toLowerCase().includes(val));
                renderSongs(filtered);
            });

            let slides = $('.slide'); let current = 0;
            setInterval(() => {
                if(slides.length > 0) {
                    $(slides[current]).fadeOut(1500);
                    current = (current + 1) % slides.length;
                    $(slides[current]).fadeIn(1500);
                }
            }, 5000);
        });

        function togglePlay() {
            if (audio.paused) { audio.play(); $('#playIcon').attr('class', 'fas fa-pause-circle'); }
            else { audio.pause(); $('#playIcon').attr('class', 'fas fa-play-circle'); }
        }
        function setVolume(v) { audio.volume = v; }
    </script>
</body>
</html>